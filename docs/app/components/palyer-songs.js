const music=document.getElementById("backgroundMusic"),playPauseBtn=document.getElementById("playPauseBtn"),prevBtn=document.getElementById("prevBtn"),nextBtn=document.getElementById("nextBtn"),volumeBtn=document.getElementById("volumeBtn"),volumeControl=document.getElementById("volumeControl"),currentSongEl=document.getElementById("currentSong"),progressContainer=document.getElementById("progressContainer"),progressBar=document.getElementById("progressBar"),currentTimeEl=document.getElementById("currentTime"),durationEl=document.getElementById("duration"),minimizeBtn=document.querySelector(".minimize-btn"),playlistContainer=document.querySelector(".playlist-container"),playlist=document.getElementById("playlist"),musicPlayer=document.querySelector(".music-player"),songs=[{title:"Luis Varga - Loco de Amor",src:"/audio/song-1.mp3"},{title:"jessi uribe - Si Me Ves Llorando",src:"/audio/song-2.mp3"},{title:"La Combinacion vallenate - Quiero Volar",src:"/audio/song-3.mp3"}];let currentSongIndex=0,isPlaying=!1,isMuted=!1,isPlaylistVisible=!1;export function initMusic(){loadSong(currentSongIndex),createPlaylist(),setupEventListeners(),updateVolumeIcon()}function loadSong(e){currentSongIndex=(e+songs.length)%songs.length;const t=songs[currentSongIndex];currentSongEl.textContent=t.title,music.src=t.src,updatePlaylistHighlight(),progressBar.style.width="0%",currentTimeEl.textContent="0:00",music.onloadedmetadata=()=>{durationEl.textContent=formatTime(music.duration),isPlaying&&playSong()}}function createPlaylist(){songs.forEach(((e,t)=>{const n=document.createElement("li");n.textContent=e.title,n.addEventListener("click",(()=>{currentSongIndex=t,loadSong(currentSongIndex),playSong()})),playlist.appendChild(n)}))}function updatePlaylistHighlight(){playlist.querySelectorAll("li").forEach(((e,t)=>{e.classList.toggle("active",t===currentSongIndex)}))}function playSong(){music.play().then((()=>{isPlaying=!0,playPauseBtn.innerHTML='<i class="fas fa-pause"></i>',playPauseBtn.classList.add("active-effect"),setTimeout((()=>playPauseBtn.classList.remove("active-effect")),1500)})).catch((e=>console.log("Error al reproducir:",e)))}function pauseSong(){music.pause(),isPlaying=!1,playPauseBtn.innerHTML='<i class="fas fa-play"></i>'}function formatTime(e){if(isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n<10?"0":""}${n}`}function updateProgress(){const{currentTime:e,duration:t}=music,n=e/t*100;progressBar.style.width=`${n}%`,currentTimeEl.textContent=formatTime(e)}function setProgress(e){const t=this.clientWidth,n=e.offsetX,i=music.duration;music.currentTime=n/t*i}function setupEventListeners(){playPauseBtn.addEventListener("click",togglePlay),prevBtn.addEventListener("click",prevSong),nextBtn.addEventListener("click",nextSong),progressContainer.addEventListener("click",setProgress),music.addEventListener("timeupdate",updateProgress),music.addEventListener("ended",nextSong),music.addEventListener("play",(()=>{isPlaying=!0,playPauseBtn.innerHTML='<i class="fas fa-pause"></i>'})),music.addEventListener("pause",(()=>{isPlaying=!1,playPauseBtn.innerHTML='<i class="fas fa-play"></i>'})),volumeControl.addEventListener("input",(()=>{music.volume=volumeControl.value,updateVolumeIcon()})),volumeBtn.addEventListener("click",toggleMute),minimizeBtn.addEventListener("click",(()=>{musicPlayer.classList.toggle("minimized"),minimizeBtn.innerHTML=musicPlayer.classList.contains("minimized")?'<i class="fas fa-expand"></i>':'<i class="fas fa-compress"></i>'})),currentSongEl.addEventListener("click",(()=>{isPlaylistVisible=!isPlaylistVisible,musicPlayer.classList.toggle("show-playlist",isPlaylistVisible)}))}function togglePlay(){isPlaying?pauseSong():playSong()}function prevSong(){loadSong(currentSongIndex-1),playSong()}function nextSong(){loadSong(currentSongIndex+1),playSong()}function toggleMute(){isMuted=!isMuted,music.muted=isMuted,updateVolumeIcon(),volumeBtn.classList.add("active-effect"),setTimeout((()=>volumeBtn.classList.remove("active-effect")),1e3)}function updateVolumeIcon(){music.muted||0===music.volume?(volumeBtn.innerHTML='<i class="fas fa-volume-mute"></i>',volumeControl.value=0):music.volume<.5?volumeBtn.innerHTML='<i class="fas fa-volume-down"></i>':volumeBtn.innerHTML='<i class="fas fa-volume-up"></i>'}